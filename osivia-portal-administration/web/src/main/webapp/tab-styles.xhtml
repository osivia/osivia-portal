<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<div
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jstl/core">

    <p class="tab-sub-title">Définition des styles du portail</p>
    
    <div class="admininistration-adaptive-container">
        <a4j:form id="styles-form">
            <div class="administration-commands">
                <!-- Add -->
                <a4j:commandLink
                    id="add-style-action"
                    action="#{stylesBean.addStyle}"
                    oncomplete="javascript:Richfaces.showModalPanel('popup-style',{left:'auto',top:'auto'})">
                    <h:graphicImage
                        value="/images/icons/create_doc.gif"
                        alt="Ajouter"
                        title="Ajouter un style" />
                </a4j:commandLink>
            
                <!-- Edit -->
                <div class="administration-command-on">
                    <a4j:commandLink
                        id="edit-style-action"
                        action="#{stylesBean.editStyle}"
                        oncomplete="javascript:Richfaces.showModalPanel('popup-style',{left:'auto',top:'auto'})">
                        <h:graphicImage
                            value="/images/icons/edit.png"
                            alt="Modifier"
                            title="Modifier le style sélectionné" />
                    </a4j:commandLink>
                </div>
                <div class="administration-command-off">
                    <h:graphicImage
                        value="/images/icons/edit.png"
                        alt="Modifier"
                        title="Modifier le style sélectionné" />
                </div>
            
                <!-- Delete -->
                <div class="administration-command-on">
                    <a4j:commandLink
                        id="delete-style-action"
                        action="#{stylesBean.deleteStyle}"
                        reRender="styles-list">
                        <h:graphicImage
                            value="/images/icons/delete.gif"
                            alt="Supprimer"
                            title="Supprimer le style sélectionné" />
                    </a4j:commandLink>
                </div>
                <div class="administration-command-off">
                    <h:graphicImage
                        value="/images/icons/delete.gif"
                        alt="Supprimer"
                        title="Supprimer le style sélectionné" />
                </div>
            </div>
    
            <!-- List -->
            <rich:orderingList
                id="styles-list"
                value="#{stylesBean.styles}"
                var="style"
                controlsType="button"
                onclick="toggleCommands(this.id);"
                selection="#{stylesBean.selectedStyles}">
                <rich:column>
                    <f:facet name="header">
                        <h:outputText value="Style" />
                    </f:facet>
                    <h:outputText value="#{style}" />
                </rich:column>
                <a4j:support
                    event="onchange"
                    immediate="true"
                    reRender="administration-commands" />
            </rich:orderingList>
            
            <!-- Buttons -->
            <div class="administration-commands">
                <a4j:commandButton
                    id="refresh-styles-action"
                    value="Rafraichir"
                    action="#{stylesBean.refreshStyles}"
                    reRender="styles-list" />
                <a4j:commandButton
                    id="save-styles-action"
                    value="Enregistrer"
                    action="#{stylesBean.save}"
                    reRender="styles-messages" />
            </div>
    
        </a4j:form>
    </div>
    
    <f:subview>
        <ui:include src="popup-style.xhtml" />
    </f:subview>
    
    <h:panelGroup id="styles-messages">
        <h:outputText value="#{stylesBean.messages}" class="messages-display" />
    </h:panelGroup>

</div>
